---
import { Image } from "astro:assets";
const { posts, maxCardsToShow } = Astro.props;

// Default image if none provided
const DEFAULT_IMAGE = {
  src: "https://images.unsplash.com/photo-1516321497487-e288fb19713f?q=80&w=1000",
  width: 1000,
  height: 667,
};
---

{
  posts.slice(0, maxCardsToShow).map((post) => (
    <article class="card lg:card-side ring-1 ring-base-content/10 bg-base-300/20 p-7 rounded-3xl">
      <a class="w-full" href={`/posts/${post.slug}`}>
        {post.data.postImage ? (
          <img
            src={post.data.postImage}
            alt={post.data.title}
            class="w-full h-52 rounded-xl object-cover"
          />
        ) : (
          <Image
            src={DEFAULT_IMAGE.src}
            alt={post.data.title}
            class="w-full h-52 rounded-xl object-cover"
            width={DEFAULT_IMAGE.width}
            height={DEFAULT_IMAGE.height}
          />
        )}
      </a>

      <div class="card-body p-0 lg:ml-7">
        <h2 class="text-xs lg:text-sm text-base-content/70">
          {post.data.category && <span>{post.data.category}</span>}
          <span class="text-xl font-bold text-primary">.</span>
          <time class="text-xs lg:text-sm text-base-content/70">
            {post.data.date}
          </time>
        </h2>
        <a href={`/posts/${post.slug}`}>
          <h1 class="font-semibold text-lg lg:text-xl">{post.data.title}</h1>
        </a>

        <div>
          <p class="text-sm lg:text-base opacity-70 line-clamp-2 xl:line-clamp-3">
            {post.data.description}
          </p>
        </div>

        <a href={`/posts/${post.slug}`} class="mt-auto flex items-center">
          <h2 class="text-sm font-semibold text-primary">Read article</h2>
          <svg
            viewBox="0 0 16 16"
            fill="none"
            aria-hidden="true"
            class="ml-1 h-4 w-4 stroke-current text-primary"
          >
            <path
              d="M6.75 5.75 9.25 8l-2.5 2.25"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </a>
      </div>
    </article>
  ))
}
